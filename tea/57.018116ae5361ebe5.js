"use strict";(self.webpackChunktea=self.webpackChunktea||[]).push([[57],{5057:(it,N,s)=>{s.r(N),s.d(N,{CustomerlModule:()=>d});var u=s(6895),i=s(4006),O=s(9299),U=s(1312),J=s(7841),v=s(5412),m=s(7155);class h{constructor(e,o,a,r){this.width="20%",this.field=e,this.header=o,this.value=a,this.width=r}}class M{}class P{}var b=(()=>{return(n=b||(b={})).AM="Amazonas",n.AC="Acre",n.RR="Roraima",b;var n})();class Q{}var t=s(4650),q=s(9274);class l extends q.s{entityPath(){return"customer"}}l.\u0275fac=function(){let n;return function(o){return(n||(n=t.n5z(l)))(o||l)}}(),l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac});var I=s(7009),x=s(7392),w=s(4859),p=s(9549),A=s(4144),Z=s(3848),S=s(4385),L=s(3238),D=s(2988);const Y=["tabGroup"];function k(n,e){1&n&&(t.TgZ(0,"mat-error")(1,"span"),t._uU(2," Campo Obrig\xe1rio "),t.qZA()())}function G(n,e){if(1&n&&(t.TgZ(0,"mat-option",33),t._uU(1),t.qZA()),2&n){const o=e.$implicit;t.Q6J("value",o.key),t.xp6(1),t.hij(" ",o.value," ")}}function E(n,e){if(1&n){const o=t.EpF();t._uU(0),t.TgZ(1,"button",40),t.NdJ("click",function(){t.CHM(o);const r=t.oxw().index,c=t.oxw();return t.KtG(c.delContact(r))}),t.TgZ(2,"mat-icon",41),t._uU(3,"remove_circle_outline"),t.qZA()()}if(2&n){const o=t.oxw().index,a=t.oxw();t.hij(" Contato ",o+1," "),t.xp6(1),t.Q6J("disabled",a.view)}}function R(n,e){if(1&n&&(t.TgZ(0,"mat-tab",34),t.YNc(1,E,4,2,"ng-template",32),t.TgZ(2,"div",3)(3,"mat-form-field",4)(4,"mat-label"),t._uU(5,"Nome"),t.qZA(),t._UZ(6,"input",35),t.qZA(),t.TgZ(7,"mat-form-field",36)(8,"mat-label"),t._uU(9,"Celular"),t.qZA(),t._UZ(10,"input",37),t.qZA(),t.TgZ(11,"mat-form-field",38)(12,"mat-label"),t._uU(13,"email"),t.qZA(),t._UZ(14,"input",39),t.qZA()()()),2&n){const o=e.index;t.Q6J("formGroupName",o),t.xp6(6),t.s9C("id","name"+o),t.Q6J("maxlength",50),t.xp6(4),t.s9C("id","phone"+o),t.Q6J("maxlength",20),t.xp6(4),t.s9C("id","email"+o),t.Q6J("maxlength",50)}}function H(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"button",40),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.addNewContact())}),t.TgZ(1,"mat-icon",41),t._uU(2,"exposure_plus_1"),t.qZA()()}if(2&n){const o=t.oxw();t.Q6J("disabled",o.view)}}class f{constructor(e,o,a,r,c){this.fb=o,this.dialogRef=a,this.service=r,this.snackBar=c,this.view=!0,this.states=b,e.id?this.customer=e.customer:(this.customer=new Q,this.view=!1)}ngOnInit(){this.form=this.fb.group({id:new i.NI({value:this.customer.id,disabled:!0}),name:new i.NI({value:this.customer.name,disabled:this.view},[i.kI.maxLength(50),i.kI.required]),trade:new i.NI({value:this.customer.trade,disabled:this.view},[i.kI.maxLength(50)]),document:new i.NI({value:this.customer.document,disabled:this.view},[i.kI.maxLength(18)]),registration:new i.NI({value:this.customer.registration,disabled:this.view},[i.kI.maxLength(18)]),cep:new i.NI({value:this.customer.address?.cep,disabled:this.view},[i.kI.maxLength(10)]),country:new i.NI({value:this.customer.address?.country??"Brasil",disabled:this.view},[i.kI.maxLength(10)]),state:new i.NI({value:this.customer.address?.state,disabled:this.view},[i.kI.maxLength(2)]),city:new i.NI({value:this.customer.address?.city,disabled:this.view},[i.kI.maxLength(30)]),neighborhood:new i.NI({value:this.customer.address?.neighborhood,disabled:this.view},[i.kI.maxLength(30)]),street:new i.NI({value:this.customer.address?.street,disabled:this.view},[i.kI.maxLength(50)]),number:new i.NI({value:this.customer.address?.number,disabled:this.view},[i.kI.maxLength(10)]),contacts:this.fb.array([])}),this.customer.contacts?.forEach(e=>{this.contacts.push(this.addContact(e))}),this.view||this.addNewContact()}get contacts(){return this.form.get("contacts")}addNewContact(){this.contacts.push(this.addContact()),this.contacts.length>1&&(this.tab.selectedIndex=this.contacts.length-1)}addContact(e){return this.fb.group({name:new i.NI({value:e?.name,disabled:this.view},[i.kI.maxLength(50)]),email:new i.NI({value:e?.email,disabled:this.view},[i.kI.maxLength(50)]),phone:new i.NI({value:e?.phone,disabled:this.view},[i.kI.maxLength(20)])})}delContact(e){this.contacts.removeAt(e)}closeForm(){this.dialogRef.close()}editForm(){this.view=!1,this.form.controls.name.enable(),this.form.controls.trade.enable(),this.form.controls.document.enable(),this.form.controls.registration.enable(),this.form.controls.cep.enable(),this.form.controls.country.enable(),this.form.controls.state.enable(),this.form.controls.city.enable(),this.form.controls.neighborhood.enable(),this.form.controls.street.enable(),this.form.controls.number.enable(),this.form.controls.cep.enable();for(let e=0;e<this.contacts.length;e++){const o=this.contacts.at(e);o.controls.name.enable(),o.controls.email.enable(),o.controls.phone.enable()}}saveForm(){this.customer.name=this.form.controls.name?.value,this.customer.trade=this.form.controls.trade?.value,this.customer.document=this.form.controls.document?.value,this.customer.registration=this.form.controls.registration?.value,this.customer.address=new M,this.customer.address.cep=this.form.controls.cep?.value,this.customer.address.country=this.form.controls.country?.value,this.customer.address.state=this.form.controls.state?.value,this.customer.address.city=this.form.controls.city?.value,this.customer.address.neighborhood=this.form.controls.neighborhood?.value,this.customer.address.street=this.form.controls.street?.value,this.customer.address.number=this.form.controls.number?.value,this.customer.contacts=[];for(let e=0;e<this.contacts.length;e++){const o=this.contacts.at(e),a=new P;a.name=o.controls.name?.value,a.email=o.controls.email?.value,a.phone=o.controls.phone?.value,this.customer.contacts.push(a)}this.customer.id?this.update():this.save()}update(){this.service.update(this.customer.id,this.customer).subscribe({next:e=>{const o=this.service.es.findIndex(a=>a.id===this.customer.id);this.service.es[o]=e,this.closeForm()}})}save(){this.service.insert(this.customer).subscribe({next:e=>{this.service.es.push(e),this.closeForm()}})}}f.\u0275fac=function(e){return new(e||f)(t.Y36(v.WI),t.Y36(i.qu),t.Y36(v.so),t.Y36(l),t.Y36(I.ux))},f.\u0275cmp=t.Xpm({type:f,selectors:[["tea-customer-form"]],viewQuery:function(e,o){if(1&e&&t.Gf(Y,5),2&e){let a;t.iGM(a=t.CRH())&&(o.tab=a.first)}},decls:60,vars:19,consts:[[3,"formGroup"],[3,"formValid","btDeleteDisable","btEditDisable","closeForm","editForm","saveForm"],[1,"div-roll"],[1,"div-container"],["appearance","outline",1,"field-full-width","item-nome"],["matInput","","formControlName","name",3,"maxlength"],[4,"ngIf"],["appearance","outline",1,"field-full-width","item-fantasia"],["matInput","","formControlName","trade",3,"maxlength"],["appearance","outline",1,"field-full-width","item-cnpj"],["matInput","","formControlName","document",3,"maxlength"],["appearance","outline",1,"field-full-width","item-ie"],["matInput","","formControlName","registration",3,"maxlength"],["appearance","outline",1,"field-full-width","item-cep"],["matInput","","formControlName","cep",3,"maxlength"],["appearance","outline",1,"field-full-width","item-pais"],["matInput","","formControlName","country",3,"maxlength"],["appearance","outline",1,"field-full-width","item-estado"],["formControlName","state"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"field-full-width","item-cidade"],["matInput","","formControlName","city",3,"maxlength"],["appearance","outline",1,"field-full-width","item-bairro"],["matInput","","formControlName","neighborhood",3,"maxlength"],["appearance","outline",1,"field-full-width","item-logradouro"],["matInput","","formControlName","street",3,"maxlength"],["appearance","outline",1,"field-full-width","item-numero"],["matInput","","formControlName","number",3,"maxlength"],["formArrayName","contacts"],["tabGroup",""],[3,"formGroupName",4,"ngFor","ngForOf"],["disabled",""],["mat-tab-label",""],[3,"value"],[3,"formGroupName"],["matInput","","formControlName","name",3,"id","maxlength"],["appearance","outline",1,"field-full-width","item-phone"],["matInput","","formControlName","phone",3,"id","maxlength"],["appearance","outline",1,"field-full-width","item-email"],["matInput","","formControlName","email",3,"id","maxlength"],["mat-icon-button","","color","warn",3,"disabled","click"],[1,"example-tab-icon"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0)(1,"tea-form",1),t.NdJ("closeForm",function(){return o.closeForm()})("editForm",function(){return o.editForm()})("saveForm",function(){return o.saveForm()}),t.TgZ(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),t._uU(6,"Nome"),t.qZA(),t._UZ(7,"input",5),t.YNc(8,k,3,0,"mat-error",6),t.qZA(),t.TgZ(9,"mat-form-field",7)(10,"mat-label"),t._uU(11,"Fantasia"),t.qZA(),t._UZ(12,"input",8),t.qZA(),t.TgZ(13,"mat-form-field",9)(14,"mat-label"),t._uU(15,"CNPJ/CPF"),t.qZA(),t._UZ(16,"input",10),t.qZA(),t.TgZ(17,"mat-form-field",11)(18,"mat-label"),t._uU(19,"IE/RG"),t.qZA(),t._UZ(20,"input",12),t.qZA()(),t._UZ(21,"hr"),t.TgZ(22,"div",3)(23,"mat-form-field",13)(24,"mat-label"),t._uU(25,"CEP"),t.qZA(),t._UZ(26,"input",14),t.qZA(),t.TgZ(27,"mat-form-field",15)(28,"mat-label"),t._uU(29,"Pais"),t.qZA(),t._UZ(30,"input",16),t.qZA(),t.TgZ(31,"mat-form-field",17)(32,"mat-label"),t._uU(33,"Estado"),t.qZA(),t.TgZ(34,"mat-select",18),t.YNc(35,G,2,2,"mat-option",19),t.ALo(36,"keyvalue"),t.qZA()(),t.TgZ(37,"mat-form-field",20)(38,"mat-label"),t._uU(39,"Cidade"),t.qZA(),t._UZ(40,"input",21),t.qZA()(),t.TgZ(41,"div",3)(42,"mat-form-field",22)(43,"mat-label"),t._uU(44,"Bairro"),t.qZA(),t._UZ(45,"input",23),t.qZA(),t.TgZ(46,"mat-form-field",24)(47,"mat-label"),t._uU(48,"Logradouro"),t.qZA(),t._UZ(49,"input",25),t.qZA(),t.TgZ(50,"mat-form-field",26)(51,"mat-label"),t._uU(52,"N\xfamero"),t.qZA(),t._UZ(53,"input",27),t.qZA()(),t._UZ(54,"hr"),t.TgZ(55,"mat-tab-group",28,29),t.YNc(57,R,15,7,"mat-tab",30),t.TgZ(58,"mat-tab",31),t.YNc(59,H,3,1,"ng-template",32),t.qZA()()()()()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(1),t.Q6J("formValid",!o.form.valid)("btDeleteDisable",void 0===o.customer.id)("btEditDisable",void 0===o.customer.id),t.xp6(6),t.Q6J("maxlength",50),t.xp6(1),t.Q6J("ngIf",o.form.controls.name.hasError("required")),t.xp6(4),t.Q6J("maxlength",50),t.xp6(4),t.Q6J("maxlength",18),t.xp6(4),t.Q6J("maxlength",18),t.xp6(6),t.Q6J("maxlength",10),t.xp6(4),t.Q6J("maxlength",10),t.xp6(5),t.Q6J("ngForOf",t.lcZ(36,17,o.states)),t.xp6(5),t.Q6J("maxlength",30),t.xp6(5),t.Q6J("maxlength",30),t.xp6(4),t.Q6J("maxlength",50),t.xp6(4),t.Q6J("maxlength",10),t.xp6(4),t.Q6J("ngForOf",o.contacts.controls))},dependencies:[u.sg,u.O5,x.Hw,w.lW,p.TO,p.KE,p.hX,A.Nt,Z.SP,Z.uD,Z.uX,S.gD,L.ey,i._Y,i.Fj,i.JJ,i.JL,i.nD,i.sg,i.u,i.x0,i.CE,D.U,u.Nd],styles:[".div-roll[_ngcontent-%COMP%]{height:20%}.div-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;gap:5px 5px;width:100%}.item-nome[_ngcontent-%COMP%], .item-fantasia[_ngcontent-%COMP%]{width:33%}.item-cnpj[_ngcontent-%COMP%]{width:19%}.item-ie[_ngcontent-%COMP%], .item-cep[_ngcontent-%COMP%], .item-pais[_ngcontent-%COMP%]{width:15%}.item-estado[_ngcontent-%COMP%]{width:20%}.item-cidade[_ngcontent-%COMP%]{width:50%}.item-bairro[_ngcontent-%COMP%]{width:40%}.item-logradouro[_ngcontent-%COMP%]{width:50%}.item-numero[_ngcontent-%COMP%]{width:10%}.item-phone[_ngcontent-%COMP%]{width:20%}.item-email[_ngcontent-%COMP%]{width:47%}@media (max-width: 740px){.div-container[_ngcontent-%COMP%]{display:flex;flex-direction:column}.item-nome[_ngcontent-%COMP%], .item-fantasia[_ngcontent-%COMP%], .item-cnpj[_ngcontent-%COMP%], .item-ie[_ngcontent-%COMP%], .item-cep[_ngcontent-%COMP%], .item-pais[_ngcontent-%COMP%], .item-estado[_ngcontent-%COMP%], .item-cidade[_ngcontent-%COMP%], .item-bairro[_ngcontent-%COMP%], .item-logradouro[_ngcontent-%COMP%], .item-numero[_ngcontent-%COMP%], .item-phone[_ngcontent-%COMP%], .item-email[_ngcontent-%COMP%]{width:100%}}"]});var y=s(7974);function j(n,e){if(1&n&&(t.TgZ(0,"th",10),t._uU(1),t.qZA()),2&n){const o=t.oxw(2),a=o.index,r=o.$implicit,c=t.oxw();t.Udp("width",c.columnWidths[a]),t.xp6(1),t.hij(" ",r.header," ")}}function z(n,e){if(1&n&&(t.TgZ(0,"td",11),t._uU(1),t.qZA()),2&n){const o=e.$implicit,a=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",a.value(o)," ")}}function B(n,e){1&n&&(t.TgZ(0,"div"),t.YNc(1,j,2,3,"th",8),t.YNc(2,z,2,1,"td",9),t.qZA())}function W(n,e){1&n&&(t.TgZ(0,"th",10),t._uU(1," View "),t.qZA())}function X(n,e){if(1&n){const o=t.EpF();t.TgZ(0,"td",11)(1,"button",13),t.NdJ("click",function(){const c=t.CHM(o).$implicit,F=t.oxw(2).$implicit,at=t.oxw();return t.KtG(at.openForm(F.value(c)))}),t.TgZ(2,"mat-icon"),t._uU(3,"open_in_new"),t.qZA()()()}}function $(n,e){1&n&&(t.TgZ(0,"div"),t.YNc(1,W,2,0,"th",12),t.YNc(2,X,4,0,"td",9),t.qZA())}function K(n,e){if(1&n&&(t.ynx(0,6),t.YNc(1,B,3,0,"div",7),t.YNc(2,$,3,0,"div",7),t.BQk()),2&n){const o=e.$implicit;t.Q6J("matColumnDef",o.field),t.xp6(1),t.Q6J("ngIf","id"!==o.field),t.xp6(1),t.Q6J("ngIf","id"===o.field)}}function V(n,e){1&n&&t._UZ(0,"tr",14)}function tt(n,e){1&n&&t._UZ(0,"tr",15)}const et=function(){return[10]};class g{constructor(){this.dataSource=new m.by,this.displayedColumns=[],this.columnWidths=[],this.panelOpenState=!1,this.sendId=new t.vpe}ngOnInit(){this.columns.forEach(e=>{this.displayedColumns.push(e.field)}),this.columns.forEach(e=>{this.columnWidths.push(e.width)}),this.filter()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}openForm(e){this.sendId.emit(e)}filter(){this.dataSource.filterPredicate=(e,o)=>{let a=!1;o=o.normalize("NFD").replace(/[^\x00-\x7F]/g,"");for(const r of this.columns)if(r.value(e)?.normalize("NFD").replace(/[^\x00-\x7F]/g,"").toLowerCase().includes(o)){a=!0;break}return a}}}g.\u0275fac=function(e){return new(e||g)},g.\u0275cmp=t.Xpm({type:g,selectors:[["tea-table"]],viewQuery:function(e,o){if(1&e&&t.Gf(y.NW,5),2&e){let a;t.iGM(a=t.CRH())&&(o.paginator=a.first)}},inputs:{columns:"columns",dataSource:"dataSource"},outputs:{sendId:"sendId"},decls:7,vars:6,consts:[[1,"mat-elevation-z8"],["mat-table","",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[3,"matColumnDef"],[4,"ngIf"],["mat-header-cell","",3,"width",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"table",1),t._UZ(2,"caption"),t.YNc(3,K,3,3,"ng-container",2),t.YNc(4,V,1,0,"tr",3),t.YNc(5,tt,1,0,"tr",4),t.qZA(),t._UZ(6,"mat-paginator",5),t.qZA()),2&e&&(t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(2),t.Q6J("ngForOf",o.columns),t.xp6(1),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,et)))},dependencies:[u.sg,u.O5,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,y.NW,x.Hw,w.lW],styles:["mat-row[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}mat-row[_ngcontent-%COMP%]:hover{border-color:currentColor}"]});var T=s(3546);class _{constructor(){this.open=new t.vpe,this.filter=new t.vpe}openForm(){this.open.emit()}applyFilter(e){this.filter.emit(e)}}_.\u0275fac=function(e){return new(e||_)},_.\u0275cmp=t.Xpm({type:_,selectors:[["tea-search"]],outputs:{open:"open",filter:"filter"},ngContentSelectors:["*"],decls:13,vars:0,consts:[[1,"filter"],["appearance","outline",1,"field-full-width","item-filter"],["matInput","","maxlength","50",3,"keyup"],["mat-icon-button","",3,"click"]],template:function(e,o){1&e&&(t.F$t(),t.TgZ(0,"mat-card")(1,"mat-card-title"),t._uU(2,"Pesquisa"),t.qZA(),t.TgZ(3,"mat-card-content")(4,"div",0)(5,"mat-form-field",1)(6,"mat-label"),t._uU(7,"Filtro"),t.qZA(),t.TgZ(8,"input",2),t.NdJ("keyup",function(r){return o.applyFilter(r)}),t.qZA()(),t.TgZ(9,"button",3),t.NdJ("click",function(){return o.openForm()}),t.TgZ(10,"mat-icon"),t._uU(11,"open_in_new"),t.qZA()()(),t.Hsn(12),t.qZA()())},dependencies:[T.a8,T.dn,T.n5,x.Hw,w.lW,p.KE,p.hX,A.Nt],styles:[".filter[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.item-filter[_ngcontent-%COMP%]{width:50%}"]});class C{constructor(e,o,a){this.dialog=e,this.service=o,this.snackBar=a,this.columns=[new h("name","Nome",r=>r.name,"25%"),new h("trade","Fantasia",r=>r.trade,"25%"),new h("address.neighborhood","Bairro",r=>r.address?.neighborhood,"20%"),new h("address.street","Logradouro",r=>r.address?.street,"25%"),new h("id","ID",r=>r.id,"5%")],this.dataSource=new m.by}ngOnInit(){this.service.getAll().subscribe({next:e=>{this.dataSource.data=e,this.service.es=e}})}openForm(e){let o;e&&(o=this.dataSource.data.filter(F=>F.id===e)[0]);const a=new v.vA;a.disableClose=!0,a.autoFocus=!0,a.data={id:e,customer:o},this.dialog.open(f,a).afterClosed().subscribe(()=>{this.dataSource.data=this.service.es})}applyFilter(e){this.dataSource.filter=e.target.value?.trim().toLowerCase()}}C.\u0275fac=function(e){return new(e||C)(t.Y36(v.uw),t.Y36(l),t.Y36(I.ux))},C.\u0275cmp=t.Xpm({type:C,selectors:[["tea-customer-list"]],decls:3,vars:2,consts:[[1,"div-class"],[3,"open","filter"],[3,"columns","dataSource","sendId"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"tea-search",1),t.NdJ("open",function(){return o.openForm()})("filter",function(r){return o.applyFilter(r)}),t.qZA(),t.TgZ(2,"tea-table",2),t.NdJ("sendId",function(r){return o.openForm(r)}),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("columns",o.columns)("dataSource",o.dataSource))},dependencies:[g,_]});const nt=[{path:"",component:C}];class d{}d.\u0275fac=function(e){return new(e||d)},d.\u0275mod=t.oAB({type:d}),d.\u0275inj=t.cJS({providers:[l],imports:[O.Bz.forChild(nt),u.ez,U.q,i.UX,J.G]})}}]);